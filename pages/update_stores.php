<?phpheader('Content-Type: application/json');class StoreManager {    private $baseDir;    public function __construct() {        $this->baseDir = $_SERVER['DOCUMENT_ROOT'] . '/pages/data';    }    public function updateStore($storeId, $updatedData) {        // 모든 shops*.json 파일 검색        $files = glob($this->baseDir . '/shops*.json');                foreach ($files as $file) {            $data = json_decode(file_get_contents($file), true);                        // 해당 매장 찾기            $storeIndex = array_search($storeId, array_column($data['stores'], 'id'));                        if ($storeIndex !== false) {                // 매장 정보 업데이트                $data['stores'][$storeIndex] = $updatedData;                                // 파일 저장                if (file_put_contents($file, json_encode($data, JSON_PRETTY_PRINT))) {                    return true;                } else {                    throw new Exception("파일 저장 실패: " . $file);                }            }        }                throw new Exception("매장을 찾을 수 없습니다: " . $storeId);    }}try {    $data = json_decode(file_get_contents('php://input'), true);        if (!isset($data['id']) || !isset($data['store'])) {        throw new Exception("잘못된 데이터 형식");    }    $storeManager = new StoreManager();    $result = $storeManager->updateStore($data['id'], $data['store']);        echo json_encode([        'success' => true    ]);} catch (Exception $e) {    echo json_encode([        'success' => false,        'error' => $e->getMessage()    ]);}?>